var Controller={init:function(){$("#jp-main").on("click",C.jp.init)},jp:{init:function(){$("#jp-main").unbind(),$("#jp-vocab").on("click",C.jp.vocab.init),V.goto_page(".jp.main")},vocab:{init:function(){$("#jp-vocab").unbind(),$("#jp-new-word").on("click",C.jp.vocab.edit.init),V.goto_page(".jp.vocab"),C.jp.vocab.get_JSON()},get_JSON:function(){$.ajax({url:"js/json/jp_words.json",success:function(a){var b=JSON.parse(a);M.jp.vocab.words=b.jpWords,M.jp.vocab.index=b.index,C.jp.vocab.get_localStorage()},error:function(a,b,c){console.log(c)}})},get_localStorage:function(){var a=window.localStorage.getItem("BBBjpWords");if(null!==a){var b=JSON.parse(a);M.jp.vocab.ls=b;for(var c=0;c<b.length;c++)"new"===b[c].f&&M.jp.vocab.words.push(b[c])}M.jp.vocab.index=M.jp.vocab.words[M.jp.vocab.words.length-1].i,V.jp.vocab.render_list()},edit:{new:!0,init:function(){V.goto_page(".jp.word-edit"),$(".word-edit .word-input").on("keyup",V.jp.vocab.edit.update_fgInputs),$("#jp-reading").on("click",V.jp.vocab.edit.reading),$("#jp-special-rdg").on("click",V.jp.vocab.edit.special_reading),$("#jp-normal-rdg").on("click",V.jp.vocab.edit.normal_reading),$("#jp-back-word").on("click",V.jp.vocab.edit.back_to_word),$("#jp-cancel-word").on("click",C.jp.vocab.edit.cancel.confirm),$("#jp-save-word").on("click",C.jp.vocab.edit.validate)},validate:function(){var a=$(".jp .word-input").val(),b=$(".jp .word-def").val(),c=""!==a,d=""!==b;c||alert("you have not entered a word"),d||alert("you have not entered a definition"),c&&d&&C.jp.vocab.edit.save()},save:function(){for(var a=M.jp.vocab.ls,b=M.jp.vocab.index,c=$(".jp .word-input").val().split("").toString(),d=$(".jp .word-type").val(),e=$(".jp .word-def").val(),f="",g="",h=0,i=$(".fg-input"),j=[],k=0;k<i.length;k++)j.push($(i[k]).val());var l=j.join(",");if(C.jp.vocab.edit.new){var m={i:b+1,kj:c,fg:l,t:d,d:e,cj:f,g:g,l:h,f:"new"};a.push(m);var n=JSON.stringify(a);window.localStorage.setItem("BBBjpWords",n),M.jp.vocab.index=b+1,C.jp.vocab.edit.close()}},close:function(){$(".word-edit .word-input").unbind(),$("#jp-reading").unbind(),$("#jp-special-rdg").unbind(),$("#jp-normal-rdg").unbind(),$("#jp-back-word").unbind(),$("#jp-save-word").unbind(),V.jp.vocab.edit.reset_form(),V.goto_page(".jp.vocab")},cancel:{confirm:function(){var a={msgs:["Discard changes?"],btns:["yes","no"],funcs:[C.jp.vocab.edit.cancel.yes,C.jp.vocab.edit.cancel.no]};V.show_overlay(a)},yes:function(){C.jp.vocab.edit.close(),V.hide_overlay()},no:function(){V.hide_overlay()}}}}}},C=Controller;